{% extends 'base.html' %}
{% load static %}
{%block title%}{{patient.surname}}{%endblock%}
{% block content %}
<div class="mt-2 p-4">
      <div class="max-w-7xl mx-auto bg-white rounded-xl shadow-black shadow-2xl">
        
    <div class="text-center rounded-xl p-4 md:p-10 bg-gray-50">
      <div class="flex justify-center space-x-4 text-xs text-blue-600 uppercase">
        <div>{{ patient.full_name|default_if_none:'N/A' }}</div>
        <div>{{ patient.phone|default_if_none:'N/A' }}</div>
        <div>{{ patient.gender|default_if_none:'N/A' }}</div>
        <div>{{ patient.dob|default_if_none:'N/A' }}</div>
      </div>
      <ul class="uk-subnav uk-subnav-pill uppercase flex justify-center gap-8" uk-switcher="animation: uk-animation-slide-left-medium, uk-animation-slide-right-medium">
        <li ><a href="#" class="rounded-lg ">HEMATOLOGY</a></li>
        <li><a href="#" class="rounded-lg ">CHEMICAL PATHOLOGY</a></li>
        <li class=><a href="#" class="rounded-lg ">MICROBIOLOGY</a></li>
        <li><a href="#" class="rounded-lg ">SEROLOGY</a></li>
        <li><a href="#" class="rounded-lg ">GENERAL</a></li>
      </ul>
      
      <div class="uk-switcher uk-margin">

        <!-- new lab -->
        <div> 
          <div class="text-center rounded-xl p-2 m-4  md:p-10 bg-gray-50">
            <ul class="uk-subnav uk-subnav-pill uppercase flex justify-center gap-2 " uk-switcher="animation: uk-animation-slide-left-medium, uk-animation-slide-right-medium">
              <li><a href="#" class="rounded-lg ">blood group</a></li>
              <li><a href="#" class="rounded-lg ">genotype</a></li>
              <li><a href="#" class="rounded-lg ">rhesus factor </a></li>
              <li><a href="#" class="rounded-lg ">full blood count</a></li>
            </ul>
            
            <div class="uk-switcher uk-margin">
       
              <div>
                <div>
              <a href="{% url 'create_blood_group' patient.file_no %}" class="text-xs text-amber-600 hover:text-green-700">
                  <i class="fa-solid fa-plus fa-2xl"></i> SEND REQUEST
              </a>

                </div>
                <div class="overflow-x-auto max-h-[50vh] p-2">
                  <table class="min-w-full divide-y divide-cyan-200 mb-4">
                    <thead class="bg-cyan-50">
                      <tr class="text-xs">
                        <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                        <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Code</th>
                        <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">result</th>
                        <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Date</th>
                        <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">input result</th>
                      </tr>
                    </thead>
                    <tbody class="bg-white divide-y divide-cyan-200">
                      {% for test_info in blood_group %}
                      <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                        <td class=" p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                        <td class=" p-3 whitespace-nowrap">{{ test_info.code|default_if_none:'N/A'}}</td>
                        <td class=" p-3 whitespace-nowrap">{{ test_info.bg_test.result|default_if_none:'N/A'}}</td>
                        <td class=" p-3 whitespace-nowrap">{{ test_info.updated|default_if_none:'N/A' }}</td>
                        <td class="p-3 whitespace-nowrap">  <a href="{% url 'update_blood_group' patient.file_no test_info.id %}" class="text-xs hover:text-green-700">
                          <i class="fa-solid fa-edit fa-2xl"></i> </a>
                    </td>
                      </tr>
                      {%empty%}
                      <tr>
                        <td colspan="10" class="p-3 text-center">blood group test yet.</td>
                    </tr>
                    {% endfor %}
                    </tbody>
                  </table>
                </div>
              </div>
            
            <!-- new test -->
            <div>
              <div>
            <a href="{% url 'create_genotype' patient.file_no %}" class="text-xs text-amber-600 hover:text-green-700">
                <i class="fa-solid fa-plus fa-2xl"></i> SEND REQUEST
            </a>
              </div>
              <div class="overflow-x-auto max-h-[50vh] p-2">
                <table class="min-w-full divide-y divide-cyan-200 mb-4">
                  <thead class="bg-cyan-50">
          
                    <tr class="text-xs">
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">code</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">result</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Date</th>
                    <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">input result</th>
                    </tr>
          
                  </thead>
                  <tbody class="bg-white divide-y divide-cyan-200">
                    {% for test_info in genotype %}
                    <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                        <td class="p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                        <td class="p-3 whitespace-nowrap">{{ test_info.code|default_if_none:'N/A' }}</td>
                        <td class="p-3 whitespace-nowrap">{{ test_info.gt_test.result|default_if_none:'N/A' }}</td>
                        <td class="p-3 whitespace-nowrap">{{ test_info.updated|default_if_none:'N/A' }}</td>
                        <td class="p-3 whitespace-nowrap">  <a href="{% url 'update_genotype' patient.file_no test_info.id %}" class="text-xs hover:text-green-700">
                          <i class="fa-solid fa-edit fa-2xl"></i> </a>
                    </td>
                    </tr>
                    {% empty %}
                    <tr>
                        <td colspan="5" class="p-3 text-center">No genotype tests available.</td>
                    </tr>
                    {% endfor %}
                  </tbody>
                </table>
              </div>
            </div>  
           <!-- new test   -->
            
            <!-- new test -->
            <div>
              <div>
            <a href="{% url 'create_rhesus' patient.file_no %}" class="text-xs text-amber-600 hover:text-green-700">
                <i class="fa-solid fa-plus fa-2xl"></i> SEND REQUEST
            </a>
              </div>
              <div class="overflow-x-auto max-h-[50vh] p-2">
                <table class="min-w-full divide-y divide-cyan-200 mb-4">
                  <thead class="bg-cyan-50">
          
                    <tr class="text-xs">
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">code</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">result</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Date</th>
                    <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">input result</th>
                    </tr>
          
                  </thead>
                  <tbody class="bg-white divide-y divide-cyan-200">
                    {% for test_info in rhesus %}
                    <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                        <td class="p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                        <td class="p-3 whitespace-nowrap">{{ test_info.code|default_if_none:'N/A' }}</td>
                        <td class="p-3 whitespace-nowrap">{{ test_info.rh_test.rhesus_d|default_if_none:'N/A' }}</td>
                        <td class="p-3 whitespace-nowrap">{{ test_info.updated|default_if_none:'N/A' }}</td>
                        <td class="p-3 whitespace-nowrap">  <a href="{% url 'update_rhesus' patient.file_no test_info.id %}" class="text-xs hover:text-green-700">
                          <i class="fa-solid fa-edit fa-2xl"></i> </a>
                    </td>
                    </tr>
                    {% empty %}
                    <tr>
                        <td colspan="5" class="p-3 text-center">No rhesus tests available.</td>
                    </tr>
                    {% endfor %}
                  </tbody>
                </table>
              </div>
            </div>  
           <!-- new test   -->            
            
              <div>
                <div>
              <a href="{% url 'create_fbc' patient.file_no %}" class="text-xs text-amber-600 hover:text-green-700">
                  <i class="fa-solid fa-plus fa-2xl"></i> SEND REQUEST
              </a>
                </div>
                <div class="overflow-x-auto max-h-[50vh] p-2">
                  <table class="min-w-full divide-y divide-cyan-200 mb-4">
                    <thead class="bg-cyan-50">
            
                      <tr class="text-xs">
                        <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                        <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">code</th>
                        <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">result</th>
                        <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Date</th>
                        <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">input result</th>
                      </tr>
            
                    </thead>
                    <tbody class="bg-white divide-y divide-cyan-200">
                      {% for test_info in fbc %}
                      <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                          <td class="p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                          <td class="p-3 whitespace-nowrap">{{ test_info.code|default_if_none:'N/A' }}</td>
                          <td class="p-3 whitespace-nowrap">
                            <details>

                              <summary class="bg-blue-600 p-2 text-white rounded-lg text-center text-xs cursor-pointer">OPEN RESULT</summary>
                             
                             <div class=" text-blue-600 h-fit w-fit text-xs overflow-x-auto max-h-[50vh] rounded-md p-4 text-left">
                             
                              {% if test_info.fbc_test %}         
                              <ul class="list-none p-0 m-0">                             
                              {% if test_info.fbc_test.hb %}
                             
                              <li class="flex justify-between items-center py-1">
                              <span class="font-medium">Hemoglobin:</span>
                              <span class="text-right">{{ test_info.fbc_test.hb }}</span>
                              </li>
                             
                              {% endif %}
                             
                              {% if test_info.fbc_test.pcv %}
                             
                              <li class="flex justify-between items-center py-1">
                              <span class="font-medium">PCV:</span>
                              <span class="text-right">{{ test_info.fbc_test.pcv }}</span>
                              </li>
                             
                              {% endif %}
                             
                              {% if test_info.fbc_test.mchc %}
                             
                              <li class="flex justify-between items-center py-1">
                              <span class="font-medium">MCHC:</span>
                              <span class="text-right">{{ test_info.fbc_test.mchc }}</span>
                              </li>
                             
                              {% endif %}
                             
                              {% if test_info.fbc_test.rbc %}
                             
                              <li class="flex justify-between items-center py-1">
                              <span class="font-medium">RBC:</span>
                              <span class="text-right">{{ test_info.fbc_test.rbc }}</span>
                              </li>
                             
                              {% endif %}
                             
                              {% if test_info.fbc_test.mch %}
                             
                              <li class="flex justify-between items-center py-1">
                              <span class="font-medium">MCH:</span>
                              <span class="text-right">{{ test_info.fbc_test.mch }}</span>
                              </li>
                             
                              {% endif %}
                             
                              {% if test_info.fbc_test.mcv %}
                             
                              <li class="flex justify-between items-center py-1">
                              <span class="font-medium">MCV:</span>
                              <span class="text-right">{{ test_info.fbc_test.mcv }}</span>
                              </li>
                             
                              {% endif %}
                             
                              {% if test_info.fbc_test.retic %}
                             
                              <li class="flex justify-between items-center py-1">
                              <span class="font-medium">Reticulocyte:</span>
                              <span class="text-right">{{ test_info.fbc_test.retic }}</span>
                              </li>
                             
                              {% endif %}
                             
                              {% if test_info.fbc_test.platelets %}
                             
                              <li class="flex justify-between items-center py-1">
                              <span class="font-medium">Platelets:</span>
                              <span class="text-right">{{ test_info.fbc_test.platelets }}</span>
                              </li>
                             
                              {% endif %}
                             
                              {% if test_info.fbc_test.wbc %}
                             
                              <li class="flex justify-between items-center py-1">
                              <span class="font-medium">WBC:</span>
                              <span class="text-right">{{ test_info.fbc_test.wbc }}</span>
                              </li>
                             
                              {% endif %}
                             
                              {% if test_info.fbc_test.esr %}
                             
                              <li class="flex justify-between items-center py-1">
                              <span class="font-medium">ESR:</span>
                              <span class="text-right">{{ test_info.fbc_test.esr }}</span>
                              </li>
                             
                              {% endif %}

                             
                              {% if test_info.fbc_test.sickle_cells %}
<li class="flex justify-between items-center py-1">
<span class="font-medium">SICKLE CELLS:</span>
<span class="text-right">{{ test_info.fbc_test.sickle_cells }}</span>
</li>
{% endif %}

{% if test_info.fbc_test.hypochromia %}
<li class="flex justify-between items-center py-1">
<span class="font-medium">HYPOCHROMIA:</span>
<span class="text-right">{{ test_info.fbc_test.hypochromia }}</span>
</li>
{% endif %}

{% if test_info.fbc_test.polychromasia %}
<li class="flex justify-between items-center py-1">
<span class="font-medium">POLYCHROMASIA:</span>
<span class="text-right">{{ test_info.fbc_test.polychromasia }}</span>
</li>
{% endif %}

{% if test_info.fbc_test.nucleated_rbc %}
<li class="flex justify-between items-center py-1">
<span class="font-medium">NUCLEATED RBC:</span>
<span class="text-right">{{ test_info.fbc_test.nucleated_rbc }}</span>
</li>
{% endif %}

{% if test_info.fbc_test.anisocytosis %}
<li class="flex justify-between items-center py-1">
<span class="font-medium">ANISOCYTOSIS:</span>
<span class="text-right">{{ test_info.fbc_test.anisocytosis }}</span>
</li>
{% endif %}

{% if test_info.fbc_test.macrocytosis %}
<li class="flex justify-between items-center py-1">
<span class="font-medium">MACROCYTOSIS:</span>
<span class="text-right">{{ test_info.fbc_test.macrocytosis }}</span>
</li>
{% endif %}

{% if test_info.fbc_test.microcytosis %}
<li class="flex justify-between items-center py-1">
<span class="font-medium">MICROCYTOSIS:</span>
<span class="text-right">{{ test_info.fbc_test.microcytosis }}</span>
</li>
{% endif %}

{% if test_info.fbc_test.poikilocytosis %}
<li class="flex justify-between items-center py-1">
<span class="font-medium">POIKILOCYTOSIS:</span>
<span class="text-right">{{ test_info.fbc_test.poikilocytosis }}</span>
</li>
{% endif %}

{% if test_info.fbc_test.target_cells %}
<li class="flex justify-between items-center py-1">
<span class="font-medium">TARGET CELLS:</span>
<span class="text-right">{{ test_info.fbc_test.target_cells }}</span>
</li>
{% endif %}

{% if test_info.fbc_test.neutrophils %}
<li class="flex justify-between items-center py-1">
<span class="font-medium">NEUTROPHILS:</span>
<span class="text-right">{{ test_info.fbc_test.neutrophils }}%</span>
</li>
{% endif %}

{% if test_info.fbc_test.eosinophils %}
<li class="flex justify-between items-center py-1">
<span class="font-medium">EOSINOPHILS:</span>
<span class="text-right">{{ test_info.fbc_test.eosinophils }}%</span>
</li>
{% endif %}

{% if test_info.fbc_test.basophils %}
<li class="flex justify-between items-center py-1">
<span class="font-medium">BASOPHILS:</span>
<span class="text-right">{{ test_info.fbc_test.basophils }}%</span>
</li>
{% endif %}

{% if test_info.fbc_test.trans_lymph %}
<li class="flex justify-between items-center py-1">
<span class="font-medium">TRANSITIONAL LYMPHOCYTES:</span>
<span class="text-right">{{ test_info.fbc_test.trans_lymph }}%</span>
</li>
{% endif %}

{% if test_info.fbc_test.lymphocytes %}
<li class="flex justify-between items-center py-1">
<span class="font-medium">LYMPHOCYTES:</span>
<span class="text-right">{{ test_info.fbc_test.lymphocytes }}%</span>
</li>
{% endif %}

{% if test_info.fbc_test.monocytes %}
<li class="flex justify-between items-center py-1">
<span class="font-medium">MONOCYTES:</span>
<span class="text-right">{{ test_info.fbc_test.monocytes }}%</span>
</li>
{% endif %}
                              </ul>
                             
                              {% endif %}
                             
                             </div>
                             
                             </details>
                             
                    </td>
                      <td class="p-3 whitespace-nowrap">{{ test_info.updated|default_if_none:'N/A' }}</td>
                          <td class="p-3 whitespace-nowrap">  <a href="{% url 'update_fbc' patient.file_no test_info.id %}" class="text-xs  hover:text-green-700">
                            <i class="fa-solid fa-edit fa-2xl"></i> </a>
                      </td>
                      </tr>
                      {% empty %}
                      <tr>
                          <td colspan="5" class="p-3 text-center">No blood group tests available.</td>
                      </tr>
                      {% endfor %}
                    </tbody>
                  </table>
                </div>
              </div>  


            
      </div>    
      </div>
       </div>
<!-- new lab  -->      
        <!-- new lab -->
        <div> 
          <div class="text-center rounded-xl p-2 m-4  md:p-10 bg-gray-50">
            <ul class="uk-subnav uk-subnav-pill uppercase flex justify-center gap-2 " uk-switcher="animation: uk-animation-slide-left-medium, uk-animation-slide-right-medium">
              <li ><a href="#" class="rounded-lg ">Urea & Electrolyte</a></li>
              <li><a href="#" class="rounded-lg ">Liver function</a></li>
              <li><a href="#" class="rounded-lg ">lipid profile</a></li>
              <li><a href="#" class="rounded-lg ">Bone chemistry</a></li>
              <li><a href="#" class="rounded-lg ">serum proteins</a></li>
              <li><a href="#" class="rounded-lg ">cerebo spinal fluid</a></li>
              <li><a href="#" class="rounded-lg ">blood glucose</a></li>
              <li><a href="#" class="rounded-lg ">miscellaneous</a></li>
            </ul>
            
            <div class="uk-switcher uk-margin">
       
              <div>
                <div>
              <a href="{% url 'create_urea_electrolyte' patient.file_no %}" class="text-xs text-amber-600 hover:text-green-700">
                  <i class="fa-solid fa-plus fa-2xl"></i> SEND REQUEST
              </a>

                </div>
                <div class="overflow-x-auto max-h-[50vh] p-2">
                  <table class="min-w-full divide-y divide-cyan-200 mb-4">
                    <thead class="bg-cyan-50">
                      <tr class="text-xs">
                        <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                        <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Code</th>
                        <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Urea</th>
                        <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Sodium</th>
                        <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">potassium</th>
                        <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Bicarbonate</th>
                        <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Chloride</th>
                        <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Caretanine</th>
                        <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Date</th>
                        <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">input result</th>
                      </tr>
                    </thead>
                    <tbody class="bg-white divide-y divide-cyan-200">
                      {% for test_info in urea_electrolyte %}
                      <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                        <td class=" p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                        <td class=" p-3 whitespace-nowrap">{{ test_info.code|default_if_none:'N/A'}}</td>
                        <td class=" p-3 whitespace-nowrap">{{ test_info.ue_test.urea|default_if_none:'N/A'}}</td>
                        <td class=" p-3 whitespace-nowrap">{{ test_info.ue_test.sodium|default_if_none:'N/A' }}</td>
                        <td class=" p-3 whitespace-nowrap">{{ test_info.ue_test.potassium|default_if_none:'N/A' }}</td>
                        <td class=" p-3 whitespace-nowrap">{{ test_info.ue_test.bicarbonate|default_if_none:'N/A' }}</td>
                        <td class=" p-3 whitespace-nowrap">{{ test_info.ue_test.chloride|default_if_none:'N/A' }}</td>
                        <td class=" p-3 whitespace-nowrap">{{ test_info.ue_test.caretinine|default_if_none:'N/A' }}</td>
                        <td class=" p-3 whitespace-nowrap">{{ test_info.updated|default_if_none:'N/A' }}</td>
                        <td class="p-3 whitespace-nowrap">  <a href="{% url 'update_urea_electrolyte' patient.file_no test_info.id %}" class="text-xs hover:text-green-700">
                          <i class="fa-solid fa-edit fa-2xl"></i> </a>
                    </td>
                      </tr>
                      {%empty%}
                      <tr>
                        <td colspan="10" class="p-3 text-center">No Urea & Electrolyte test yet.</td>
                    </tr>
                    {% endfor %}
                    </tbody>
                  </table>
                </div>
              </div>
            
              <!-- new test -->
            
            <!-- new test  -->
            <div>
              <div>
                <a href="{%url 'create_liver_function' patient.file_no %}" class="text-xs text-amber-600 hover:text-green-700"><i class="fa-solid fa-plus fa-2xl"></i> SEND REQUEST</a>
              </div>
              <div class="overflow-x-auto max-h-[50vh] p-2">
                <table class="min-w-full divide-y divide-cyan-200 mb-4">
                  <thead class="bg-cyan-50">
                    <tr class="text-xs">
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">alkaline phosphatase</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">sgot</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">sgpt</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">gamma_gt</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">total_bilirubin</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">direct_bilirubin</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">date</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider"></th>
                    </tr>
  
                  </thead>
                  <tbody class="bg-white divide-y divide-cyan-200">
                    {%for test_info in liver_function %}
                    <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                      <td class=" p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ test_info.lf_test.alkaline_phosphatase|default_if_none:'N/A' }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ test_info.lf_test.sgot|default_if_none:'N/A' }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ test_info.lf_test.sgpt|default_if_none:'N/A' }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ test_info.lf_test.gamma_gt|default_if_none:'N/A' }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ test_info.lf_test.total_bilirubin|default_if_none:'N/A' }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ test_info.lf_test.direct_bilirubin|default_if_none:'N/A' }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ test_info.updated|default_if_none:'N/A' }}</td>
                      <td class=" p-3 whitespace-nowrap">  <a href="{%url 'update_liver_function' patient.file_no test_info.id %}" class=" hover:text-green-700"><i class="fa-solid fa-edit fa-2xl"></i></a></td> 
                    </tr>
                    {%empty%}
                    <tr>
                      <td colspan="9" class="p-3 text-center">No liver function test yet.</td>
                  </tr>
                  {% endfor %}
                  </tbody>
                </table>
              </div>
            </div>  
          
            <!-- new test  -->
          
            <div>
              <div>
                <a href="{%url 'create_lipid_profile' patient.file_no %}" class="text-xs text-amber-600 hover:text-green-700"><i class="fa-solid fa-plus fa-2xl"></i> SEND REQUEST</a>
              </div>
              <div class="overflow-x-auto max-h-[50vh] p-2">
                <table class="min-w-full divide-y divide-cyan-200 mb-4">
                  <thead class="bg-cyan-50">
          
                    <tr class="text-xs">
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">cholesterol</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">triglyceride</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">hdl_cholesterol</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">ldl_cholesterol</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Date</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider"></th>
                    </tr>
          
                  </thead>
                  <tbody class="bg-white divide-y divide-cyan-200">
                    {%for test_info in lipid_profile %}
                    <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                      <td class=" p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ test_info.lp_test.cholesterol|default_if_none:'N/A' }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ test_info.lp_test.triglyceride|default_if_none:'N/A' }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ test_info.lp_test.hdl_cholesterol|default_if_none:'N/A' }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ test_info.lp_test.ldl_cholesterol|default_if_none:'N/A'}}</td>
                      <td class=" p-3 whitespace-nowrap">{{ test_info.updated }}</td>
                      <td class=" p-3 whitespace-nowrap"> <a href="{%url 'update_lipid_profile' patient.file_no test_info.id %}" class=" hover:text-green-700"><i class="fa-solid fa-edit fa-2xl"></i></a></td>
                    </tr>
                    {%empty%}
                    <tr>
                      <td colspan="7" class="p-3 text-center">No lipid profile test yet.</td>
                  </tr>
                  {% endfor %}
                  </tbody>
                </table>
              </div>
            </div>  
          
          <!-- new test  -->

          <!-- new test  -->
            <div>
              <div>
                <a href="{%url 'create_bone_chemistry' patient.file_no %}" class="text-xs text-amber-600 hover:text-green-700"><i class="fa-solid fa-plus fa-2xl"></i> SEND REQUEST</a>
              </div>
              <div class="overflow-x-auto max-h-[50vh] p-2">
                <table class="min-w-full divide-y divide-cyan-200 mb-4">
                  <thead class="bg-cyan-50">
                    <tr class="text-xs">
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">alkaline phosphatase</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">calcium</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">inorganic phosphate</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">date</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider"></th>
                    </tr>
  
                  </thead>
                  <tbody class="bg-white divide-y divide-cyan-200">
                    {%for test_info in bone_chemistry %}
                    <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                      <td class=" p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ test_info.bc_test.alkaline_phosphatase|default_if_none:'N/A' }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ test_info.bc_test.calcium|default_if_none:'N/A' }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ test_info.bc_test.inorganic_phosphate|default_if_none:'N/A' }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ test_info.updated|default_if_none:'N/A' }}</td>
                      <td class=" p-3 whitespace-nowrap">  <a href="{%url 'update_bone_chemistry' patient.file_no test_info.id %}" class=" hover:text-green-700"><i class="fa-solid fa-edit fa-2xl"></i></a></td> 
                    </tr>
                    {%empty%}
                    <tr>
                      <td colspan="6" class="p-3 text-center">No bone chemistry test yet.</td>
                  </tr>
                  {% endfor %}
                  </tbody>
                </table>
              </div>
            </div>  
          
            <!-- new test  -->
          
            <div>
              <div>
                <a href="{%url 'create_serum_proteins' patient.file_no %}" class="text-xs text-amber-600 hover:text-green-700"><i class="fa-solid fa-plus fa-2xl"></i> SEND REQUEST</a>
              </div>
              <div class="overflow-x-auto max-h-[50vh] p-2">
                <table class="min-w-full divide-y divide-cyan-200 mb-4">
                  <thead class="bg-cyan-50">
          
                    <tr class="text-xs">
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">t protein</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">albumin</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">globulin</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">a g ratio</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Date</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider"></th>
                    </tr>
          
                  </thead>
                  <tbody class="bg-white divide-y divide-cyan-200">
                    {%for test_info in serum_proteins %}
                    <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                      <td class=" p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ test_info.sp_test.t_protien|default_if_none:'N/A' }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ test_info.sp_test.albumin|default_if_none:'N/A' }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ test_info.sp_test.globulin|default_if_none:'N/A'}}</td>
                      <td class=" p-3 whitespace-nowrap">{{ test_info.sp_test.a_g_ratio|default_if_none:'N/A' }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ test_info.updated }}</td>
                      <td class=" p-3 whitespace-nowrap"> <a href="{%url 'update_serum_proteins' patient.file_no test_info.id %}" class=" hover:text-green-700"><i class="fa-solid fa-edit fa-2xl"></i></a></td>
                    </tr>
                    {%empty%}
                    <tr>
                      <td colspan="7" class="p-3 text-center">No serum proteins test yet.</td>
                  </tr>
                  {% endfor %}
                  </tbody>
                </table>
              </div>
            </div>  
          
          <!-- new test  -->

          <!-- new test  -->
            <div>
              <div>
                <a href="{%url 'create_cerebro_spinal_fluid' patient.file_no %}" class="text-xs text-amber-600 hover:text-green-700"><i class="fa-solid fa-plus fa-2xl"></i> SEND REQUEST</a>
              </div>
              <div class="overflow-x-auto max-h-[50vh] p-2">
                <table class="min-w-full divide-y divide-cyan-200 mb-4">
                  <thead class="bg-cyan-50">
                    <tr class="text-xs">
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">csf glucose</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">csf protein</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">csf chloride</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">date</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider"></th>
                    </tr>
  
                  </thead>
                  <tbody class="bg-white divide-y divide-cyan-200">
                    {%for test_info in cerebro_spinal_fluid %}
                    <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                      <td class=" p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ test_info.csf_test.csf_glucose|default_if_none:'N/A' }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ test_info.csf_test.csf_protein|default_if_none:'N/A' }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ test_info.csf_test.csf_chloride|default_if_none:'N/A' }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ test_info.updated|default_if_none:'N/A' }}</td>
                      <td class=" p-3 whitespace-nowrap">  <a href="{%url 'update_cerebro_spinal_fluid' patient.file_no test_info.id %}" class=" hover:text-green-700"><i class="fa-solid fa-edit fa-2xl"></i></a></td> 
                    </tr>
                    {%empty%}
                    <tr>
                      <td colspan="6" class="p-3 text-center">No cerebo spinal fluid test yet.</td>
                  </tr>
                  {% endfor %}
                  </tbody>
                </table>
              </div>
            </div>  
          
            <!-- new test  -->
          
            <div>
              <div>
                <a href="{%url 'create_blood_glucose' patient.file_no %}" class="text-xs text-amber-600 hover:text-green-700"><i class="fa-solid fa-plus fa-2xl"></i> SEND REQUEST</a>
              </div>
              <div class="overflow-x-auto max-h-[50vh] p-2">
                <table class="min-w-full divide-y divide-cyan-200 mb-4">
                  <thead class="bg-cyan-50">
          
                    <tr class="text-xs">
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">test type</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">result</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Date</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider"></th>
                    </tr>
          
                  </thead>
                  <tbody class="bg-white divide-y divide-cyan-200">
                    {%for test_info in blood_glucose %}
                    <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                      <td class=" p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ test_info.bgl_test.test_type|default_if_none:'N/A' }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ test_info.bgl_test.result|default_if_none:'N/A'}}</td>
                      <td class=" p-3 whitespace-nowrap">{{ test_info.updated }}</td>
                      <td class=" p-3 whitespace-nowrap"> <a href="{%url 'update_blood_glucose' patient.file_no test_info.id %}" class=" hover:text-green-700"><i class="fa-solid fa-edit fa-2xl"></i></a></td>
                    </tr>
                    {%empty%}
                    <tr>
                      <td colspan="5" class="p-3 text-center">No blood glucose test yet.</td>
                  </tr>
                  {% endfor %}
                  </tbody>
                </table>
              </div>
            </div>  
          
          <!-- new test  -->

          <!-- new test  -->
            <div>
              <div>
                <a href="{%url 'create_miscellaneous_chempath_tests' patient.file_no %}" class="text-xs text-amber-600 hover:text-green-700"><i class="fa-solid fa-plus fa-2xl"></i> SEND REQUEST</a>
              </div>
              <div class="overflow-x-auto max-h-[50vh] p-2">
                <table class="min-w-full divide-y divide-cyan-200 mb-4">
                  <thead class="bg-cyan-50">
                    <tr class="text-xs">
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">uric acid</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">serum amylase</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">acid phosphatase total</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">acid phosphatase prostatic</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">date</th>
                      <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider"></th>
                    </tr>
  
                  </thead>
                  <tbody class="bg-white divide-y divide-cyan-200">
                    {%for test_info in miscellaneous_chempath_tests %}
                    <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                      <td class=" p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ test_info.misc_test.uric_acid|default_if_none:'N/A' }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ test_info.misc_test.serum_amylase|default_if_none:'N/A' }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ test_info.misc_test.acid_phosphatase_total|default_if_none:'N/A' }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ test_info.lf_test.acid_phosphatase_prostatic|default_if_none:'N/A' }}</td>
                      <td class=" p-3 whitespace-nowrap">{{ test_info.updated|default_if_none:'N/A' }}</td>
                      <td class=" p-3 whitespace-nowrap">  <a href="{%url 'update_miscellaneous_chempath_tests' patient.file_no test_info.id %}" class=" hover:text-green-700"><i class="fa-solid fa-edit fa-2xl"></i></a></td> 
                    </tr>
                    {%empty%}
                    <tr>
                      <td colspan="9" class="p-3 text-center">No miscellaneous test  yet.</td>
                  </tr>
                  {% endfor %}
                  </tbody>
                </table>
              </div>
            </div>  
          
            <!-- new test  -->
          
            
      </div>    
      </div>

       </div>
<!-- new lab  -->      

<!-- new lab -->
        <div> 
          <div class="text-center rounded-xl p-2 m-4  md:p-10 bg-gray-50">
            <ul class="uk-subnav uk-subnav-pill uppercase flex justify-center gap-2 " uk-switcher="animation: uk-animation-slide-left-medium, uk-animation-slide-right-medium">
              <li ><a href="#" class="rounded-lg ">Urine microscopy </a></li>
              <li><a href="#" class="rounded-lg ">HVS</a></li>
              <li><a href="#" class="rounded-lg ">Stool</a></li>
              <li><a href="#" class="rounded-lg ">blood culture</a></li>
              <li><a href="#" class="rounded-lg ">occult blood</a></li>
              <li><a href="#" class="rounded-lg ">sputum mcs</a></li>
              <li><a href="#" class="rounded-lg ">gram stain</a></li>
              <li><a href="#" class="rounded-lg ">zn stain</a></li>
              <li><a href="#" class="rounded-lg ">semen analysis</a></li>
              <li><a href="#" class="rounded-lg ">urinalysis</a></li>
              <li><a href="#" class="rounded-lg ">pregnancy</a></li>
            </ul>
            
            <div class="uk-switcher uk-margin">
       
              <div>
                <div>
              <a href="{% url 'create_urine_microscopy' patient.file_no %}" class="text-xs text-amber-600 hover:text-green-700">
                  <i class="fa-solid fa-plus fa-2xl"></i> SEND REQUEST
              </a>

                </div>
                <div class="overflow-x-auto max-h-[50vh] p-2">
                  <table class="min-w-full divide-y divide-cyan-200 mb-4">
                    <thead class="bg-cyan-50">
                      <tr class="text-xs">
                        <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                        <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Code</th>
                        <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Pus cells</th>
                        <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">rbc</th>
                        <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">epithelial cells</th>
                        <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">casts</th>
                        <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Crystals</th>
                        <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">ova</th>
                        <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">culture yield</th>
                        <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">antibiotic sensitivity</th>
                        <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Date</th>
                        <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">input result</th>
                      </tr>
                    </thead>
                    <tbody class="bg-white divide-y divide-cyan-200">
                      {% for test_info in urine_microscopy%}
                      <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                        <td class=" p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                        <td class=" p-3 whitespace-nowrap">{{ test_info.code|default_if_none:'N/A'}}</td>
                        <td class=" p-3 whitespace-nowrap">{{ test_info.urine_test.pus_cells|default_if_none:'N/A'}}</td>
                        <td class=" p-3 whitespace-nowrap">{{ test_info.urine_test.rbc|default_if_none:'N/A' }}</td>
                        <td class=" p-3 whitespace-nowrap">{{ test_info.urine_test.epithelial_cells|default_if_none:'N/A' }}</td>
                        <td class=" p-3 whitespace-nowrap">{{ test_info.urine_test.casts|default_if_none:'N/A' }}</td>
                        <td class=" p-3 whitespace-nowrap">{{ test_info.urine_test.crystals|default_if_none:'N/A' }}</td>
                        <td class=" p-3 whitespace-nowrap">{{ test_info.urine_test.ova|default_if_none:'N/A' }}</td>
                        <td class=" p-3 whitespace-nowrap">{{ test_info.urine_test.culture_yield|default_if_none:'N/A' }}</td>
                        <td class=" p-3 whitespace-nowrap">{{ test_info.urine_test.antibiotic_sensitivity|default_if_none:'N/A' }}</td>
                        <td class=" p-3 whitespace-nowrap">{{ test_info.updated|default_if_none:'N/A' }}</td>
                        <td class="p-3 whitespace-nowrap">  <a href="{% url 'update_urine_microscopy' patient.file_no test_info.id %}" class="text-xs hover:text-green-700">
                          <i class="fa-solid fa-edit fa-2xl"></i> </a>
                    </td>
                      </tr>
                      {%empty%}
                      <tr>
                        <td colspan="10" class="p-3 text-center">No Urine microscopy test yet.</td>
                    </tr>
                    {% endfor %}
                    </tbody>
                  </table>
                </div>
              </div>
                          <!-- new test  -->
                          <div>
                            <!-- HVS Section -->
                            <div>
                              <a href="{% url 'create_hvs' patient.file_no %}" class="text-xs text-amber-600 hover:text-green-700">
                                <i class="fa-solid fa-plus fa-2xl"></i> SEND REQUEST
                              </a>
                            </div>
                            <div class="overflow-x-auto max-h-[50vh] p-2">
                              <table class="min-w-full divide-y divide-cyan-200 mb-4">
                                <thead class="bg-cyan-50">
                                  <tr class="text-xs">
                                    <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                                    <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Code</th>
                                    <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Pus cells</th>
                                    <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">RBC</th>
                                    <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Epithelial cells</th>
                                    <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">T. vaginalis</th>
                                    <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Yeast cells</th>
                                    <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Culture yield</th>
                                    <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Antibiotic sensitivity</th>
                                    <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Date</th>
                                    <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Input result</th>
                                  </tr>
                                </thead>
                                <tbody class="bg-white divide-y divide-cyan-200">
                                  {% for test_info in hvs %}
                                  <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                                    <td class="p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                                    <td class="p-3 whitespace-nowrap">{{ test_info.code|default_if_none:'N/A' }}</td>
                                    <td class="p-3 whitespace-nowrap">{{ test_info.hvs_test.pus_cells|default_if_none:'N/A' }}</td>
                                    <td class="p-3 whitespace-nowrap">{{ test_info.hvs_test.rbc|default_if_none:'N/A' }}</td>
                                    <td class="p-3 whitespace-nowrap">{{ test_info.hvs_test.epithelial_cells|default_if_none:'N/A' }}</td>
                                    <td class="p-3 whitespace-nowrap">{{ test_info.hvs_test.t_vaginalis|default_if_none:'N/A' }}</td>
                                    <td class="p-3 whitespace-nowrap">{{ test_info.hvs_test.yeast_cells|default_if_none:'N/A' }}</td>
                                    <td class="p-3 whitespace-nowrap">{{ test_info.hvs_test.culture_yield|default_if_none:'N/A' }}</td>
                                    <td class="p-3 whitespace-nowrap">{{ test_info.hvs_test.antibiotic_sensitivity|default_if_none:'N/A' }}</td>
                                    <td class="p-3 whitespace-nowrap">{{ test_info.updated|default_if_none:'N/A' }}</td>
                                    <td class="p-3 whitespace-nowrap">
                                      <a href="{% url 'update_hvs' patient.file_no test_info.id %}" class="text-xs hover:text-green-700">
                                        <i class="fa-solid fa-edit fa-2xl"></i>
                                      </a>
                                    </td>
                                  </tr>
                                  {% empty %}
                                  <tr>
                                    <td colspan="11" class="p-3 text-center">No HVS test yet.</td>
                                  </tr>
                                  {% endfor %}
                                </tbody>
                              </table>
                            </div>
                          </div>
                          
                          <!-- Stool Section -->
                          <div>
                            <div>
                              <a href="{% url 'create_stool' patient.file_no %}" class="text-xs text-amber-600 hover:text-green-700">
                                <i class="fa-solid fa-plus fa-2xl"></i> SEND REQUEST
                              </a>
                            </div>
                            <div class="overflow-x-auto max-h-[50vh] p-2">
                              <table class="min-w-full divide-y divide-cyan-200 mb-4">
                                <thead class="bg-cyan-50">
                                  <tr class="text-xs">
                                    <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                                    <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Code</th>
                                    <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Consistency</th>
                                    <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Color</th>
                                    <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Mucus</th>
                                    <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Blood</th>
                                    <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Ova</th>
                                    <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Cyst</th>
                                    <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Culture yield</th>
                                    <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Antibiotic sensitivity</th>
                                    <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Date</th>
                                    <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Input result</th>
                                  </tr>
                                </thead>
                                <tbody class="bg-white divide-y divide-cyan-200">
                                  {% for test_info in stool %}
                                  <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                                    <td class="p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                                    <td class="p-3 whitespace-nowrap">{{ test_info.code|default_if_none:'N/A' }}</td>
                                    <td class="p-3 whitespace-nowrap">{{ test_info.stool_test.consistency|default_if_none:'N/A' }}</td>
                                    <td class="p-3 whitespace-nowrap">{{ test_info.stool_test.color|default_if_none:'N/A' }}</td>
                                    <td class="p-3 whitespace-nowrap">{{ test_info.stool_test.mucus|default_if_none:'N/A' }}</td>
                                    <td class="p-3 whitespace-nowrap">{{ test_info.stool_test.blood|default_if_none:'N/A' }}</td>
                                    <td class="p-3 whitespace-nowrap">{{ test_info.stool_test.ova|default_if_none:'N/A' }}</td>
                                    <td class="p-3 whitespace-nowrap">{{ test_info.stool_test.cyst|default_if_none:'N/A' }}</td>
                                    <td class="p-3 whitespace-nowrap">{{ test_info.stool_test.culture_yield|default_if_none:'N/A' }}</td>
                                    <td class="p-3 whitespace-nowrap">{{ test_info.stool_test.antibiotic_sensitivity|default_if_none:'N/A' }}</td>
                                    <td class="p-3 whitespace-nowrap">{{ test_info.updated|default_if_none:'N/A' }}</td>
                                    <td class="p-3 whitespace-nowrap">
                                      <a href="{% url 'update_stool' patient.file_no test_info.id %}" class="text-xs hover:text-green-700">
                                        <i class="fa-solid fa-edit fa-2xl"></i>
                                      </a>
                                    </td>
                                  </tr>
                                  {% empty %}
                                  <tr>
                                    <td colspan="12" class="p-3 text-center">No Stool test yet.</td>
                                  </tr>
                                  {% endfor %}
                                </tbody>
                              </table>
                            </div>
                          </div>
                          <!-- new test  -->
<!-- Previous content remains the same -->

<!-- Blood Culture Section -->
<div>
  <div>
    <a href="{% url 'create_blood_culture' patient.file_no %}" class="text-xs text-amber-600 hover:text-green-700">
      <i class="fa-solid fa-plus fa-2xl"></i> SEND REQUEST
    </a>
  </div>
  <div class="overflow-x-auto max-h-[50vh] p-2">
    <table class="min-w-full divide-y divide-cyan-200 mb-4">
      <thead class="bg-cyan-50">
        <tr class="text-xs">
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Code</th>
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Result</th>
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Culture yield</th>
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Antibiotic sensitivity</th>
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Date</th>
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Input result</th>
        </tr>
      </thead>
      <tbody class="bg-white divide-y divide-cyan-200">
        {% for test_info in blood_culture %}
        <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
          <td class="p-3 whitespace-nowrap">{{ forloop.counter }}</td>
          <td class="p-3 whitespace-nowrap">{{ test_info.code|default_if_none:'N/A' }}</td>
          <td class="p-3 whitespace-nowrap">{{ test_info.blood_culture_test.result|default_if_none:'N/A' }}</td>
          <td class="p-3 whitespace-nowrap">{{ test_info.blood_culture_test.culture_yield|default_if_none:'N/A' }}</td>
          <td class="p-3 whitespace-nowrap">{{ test_info.blood_culture_test.antibiotic_sensitivity|default_if_none:'N/A' }}</td>
          <td class="p-3 whitespace-nowrap">{{ test_info.updated|default_if_none:'N/A' }}</td>
          <td class="p-3 whitespace-nowrap">
            <a href="{% url 'update_blood_culture' patient.file_no test_info.id %}" class="text-xs hover:text-green-700">
              <i class="fa-solid fa-edit fa-2xl"></i>
            </a>
          </td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="6" class="p-3 text-center">No Blood Culture test yet.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>

<!-- Occult Blood Section -->
<div>
  <div>
    <a href="{% url 'create_occult_blood' patient.file_no %}" class="text-xs text-amber-600 hover:text-green-700">
      <i class="fa-solid fa-plus fa-2xl"></i> SEND REQUEST
    </a>
  </div>
  <div class="overflow-x-auto max-h-[50vh] p-2">
    <table class="min-w-full divide-y divide-cyan-200 mb-4">
      <thead class="bg-cyan-50">
        <tr class="text-xs">
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Code</th>
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Result</th>
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Culture yield</th>
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Antibiotic sensitivity</th>
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Date</th>
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Input result</th>
        </tr>
      </thead>
      <tbody class="bg-white divide-y divide-cyan-200">
        {% for test_info in occult_blood %}
        <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
          <td class="p-3 whitespace-nowrap">{{ forloop.counter }}</td>
          <td class="p-3 whitespace-nowrap">{{ test_info.code|default_if_none:'N/A' }}</td>
          <td class="p-3 whitespace-nowrap">{{ test_info.occult_blood_test.result|default_if_none:'N/A' }}</td>
          <td class="p-3 whitespace-nowrap">{{ test_info.occult_blood_test.culture_yield|default_if_none:'N/A' }}</td>
          <td class="p-3 whitespace-nowrap">{{ test_info.occult_blood_test.antibiotic_sensitivity|default_if_none:'N/A' }}</td>
          <td class="p-3 whitespace-nowrap">{{ test_info.updated|default_if_none:'N/A' }}</td>
          <td class="p-3 whitespace-nowrap">
            <a href="{% url 'update_occult_blood' patient.file_no test_info.id %}" class="text-xs hover:text-green-700">
              <i class="fa-solid fa-edit fa-2xl"></i>
            </a>
          </td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="7" class="p-3 text-center">No Occult Blood test yet.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>

<!-- Sputum MCS Section -->
<div>
  <div>
    <a href="{% url 'create_sputum_mcs' patient.file_no %}" class="text-xs text-amber-600 hover:text-green-700">
      <i class="fa-solid fa-plus fa-2xl"></i> SEND REQUEST
    </a>
  </div>
  <div class="overflow-x-auto max-h-[50vh] p-2">
    <table class="min-w-full divide-y divide-cyan-200 mb-4">
      <thead class="bg-cyan-50">
        <tr class="text-xs">
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Code</th>
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Culture yield</th>
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Antibiotic sensitivity</th>
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Date</th>
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Input result</th>
        </tr>
      </thead>
      <tbody class="bg-white divide-y divide-cyan-200">
        {% for test_info in sputum_mcs %}
        <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
          <td class="p-3 whitespace-nowrap">{{ forloop.counter }}</td>
          <td class="p-3 whitespace-nowrap">{{ test_info.code|default_if_none:'N/A' }}</td>
          <td class="p-3 whitespace-nowrap">{{ test_info.sputum_mcs_test.culture_yield|default_if_none:'N/A' }}</td>
          <td class="p-3 whitespace-nowrap">{{ test_info.sputum_mcs_test.antibiotic_sensitivity|default_if_none:'N/A' }}</td>
          <td class="p-3 whitespace-nowrap">{{ test_info.updated|default_if_none:'N/A' }}</td>
          <td class="p-3 whitespace-nowrap">
            <a href="{% url 'update_sputum_mcs' patient.file_no test_info.id %}" class="text-xs hover:text-green-700">
              <i class="fa-solid fa-edit fa-2xl"></i>
            </a>
          </td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="6" class="p-3 text-center">No Sputum MCS test yet.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>

<!-- Previous content remains the same -->

<!-- Gram Stain Section -->
<div>
  <div>
    <a href="{% url 'create_gram_stain' patient.file_no %}" class="text-xs text-amber-600 hover:text-green-700">
      <i class="fa-solid fa-plus fa-2xl"></i> SEND REQUEST
    </a>
  </div>
  <div class="overflow-x-auto max-h-[50vh] p-2">
    <table class="min-w-full divide-y divide-cyan-200 mb-4">
      <thead class="bg-cyan-50">
        <tr class="text-xs">
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Code</th>
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Sample Type</th>
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Gram Stain Findings</th>
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Other Findings</th>
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Culture Yield</th>
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Antibiotic Sensitivity</th>
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Date</th>
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Input result</th>
        </tr>
      </thead>
      <tbody class="bg-white divide-y divide-cyan-200">
        {% for test_info in gram_stain %}
        <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
          <td class="p-3 whitespace-nowrap">{{ forloop.counter }}</td>
          <td class="p-3 whitespace-nowrap">{{ test_info.code|default_if_none:'N/A' }}</td>
          <td class="p-3 whitespace-nowrap">
            {% if test_info.gram_stain_test.urine %}Urine{% endif %}
            {% if test_info.gram_stain_test.hvs %}HVS{% endif %}
            {% if test_info.gram_stain_test.swab %}Swab{% endif %}
            {% if test_info.gram_stain_test.pus %}Pus{% endif %}
            {% if test_info.gram_stain_test.aspirate %}Aspirate{% endif %}
            {% if test_info.gram_stain_test.sputum %}Sputum{% endif %}
          </td>
          <td class="p-3 whitespace-nowrap">
            {% if test_info.gram_stain_test.gram_positive_cocci %}Gram +ve cocci{% endif %}
            {% if test_info.gram_stain_test.gram_negative_cocci %}Gram -ve cocci{% endif %}
            {% if test_info.gram_stain_test.gram_positive_rods %}Gram +ve rods{% endif %}
            {% if test_info.gram_stain_test.gram_negative_rods %}Gram -ve rods{% endif %}
            {% if test_info.gram_stain_test.gram_positive_clusters %}Gram +ve clusters{% endif %}
            {% if test_info.gram_stain_test.gram_negative_clusters %}Gram -ve clusters{% endif %}
            {% if test_info.gram_stain_test.gram_positive_chains %}Gram +ve chains{% endif %}
            {% if test_info.gram_stain_test.gram_negative_chains %}Gram -ve chains{% endif %}
          </td>
          <td class="p-3 whitespace-nowrap">{{ test_info.gram_stain_test.other_findings|default_if_none:'N/A' }}</td>
          <td class="p-3 whitespace-nowrap">{{ test_info.gram_stain_test.culture_yield|default_if_none:'N/A' }}</td>
          <td class="p-3 whitespace-nowrap">{{ test_info.gram_stain_test.antibiotic_sensitivity|default_if_none:'N/A' }}</td>
          <td class="p-3 whitespace-nowrap">{{ test_info.updated|default_if_none:'N/A' }}</td>
          <td class="p-3 whitespace-nowrap">
            <a href="{% url 'update_gram_stain' patient.file_no test_info.id %}" class="text-xs hover:text-green-700">
              <i class="fa-solid fa-edit fa-2xl"></i>
            </a>
          </td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="9" class="p-3 text-center">No Gram Stain test yet.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>

<!-- ZN Stain Section -->
<div>
  <div>
    <a href="{% url 'create_zn_stain' patient.file_no %}" class="text-xs text-amber-600 hover:text-green-700">
      <i class="fa-solid fa-plus fa-2xl"></i> SEND REQUEST
    </a>
  </div>
  <div class="overflow-x-auto max-h-[50vh] p-2">
    <table class="min-w-full divide-y divide-cyan-200 mb-4">
      <thead class="bg-cyan-50">
        <tr class="text-xs">
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Code</th>
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">First Sample</th>
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Second Sample</th>
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Third Sample</th>
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Culture Yield</th>
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Antibiotic Sensitivity</th>
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Date</th>
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Input result</th>
        </tr>
      </thead>
      <tbody class="bg-white divide-y divide-cyan-200">
        {% for test_info in zn_stain %}
        <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
          <td class="p-3 whitespace-nowrap">{{ forloop.counter }}</td>
          <td class="p-3 whitespace-nowrap">{{ test_info.code|default_if_none:'N/A' }}</td>
          <td class="p-3 whitespace-nowrap">{{ test_info.zn_stain_test.first_sample|default_if_none:'N/A' }}</td>
          <td class="p-3 whitespace-nowrap">{{ test_info.zn_stain_test.second_sample|default_if_none:'N/A' }}</td>
          <td class="p-3 whitespace-nowrap">{{ test_info.zn_stain_test.third_sample|default_if_none:'N/A' }}</td>
          <td class="p-3 whitespace-nowrap">{{ test_info.zn_stain_test.culture_yield|default_if_none:'N/A' }}</td>
          <td class="p-3 whitespace-nowrap">{{ test_info.zn_stain_test.antibiotic_sensitivity|default_if_none:'N/A' }}</td>
          <td class="p-3 whitespace-nowrap">{{ test_info.updated|default_if_none:'N/A' }}</td>
          <td class="p-3 whitespace-nowrap">
            <a href="{% url 'update_zn_stain' patient.file_no test_info.id %}" class="text-xs hover:text-green-700">
              <i class="fa-solid fa-edit fa-2xl"></i>
            </a>
          </td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="9" class="p-3 text-center">No ZN Stain test yet.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>

<!-- Previous content remains the same -->

<!-- Semen Analysis Section -->
<div>
  <div>
    <a href="{% url 'create_semen_analysis' patient.file_no %}" class="text-xs text-amber-600 hover:text-green-700">
      <i class="fa-solid fa-plus fa-2xl"></i> SEND REQUEST
    </a>
  </div>
  <div class="overflow-x-auto max-h-[50vh] p-2">
    <table class="min-w-full divide-y divide-cyan-200 mb-4">
      <thead class="bg-cyan-50">
        <tr class="text-xs">
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Code</th>
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Time Produced</th>
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Time Examined</th>
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Color</th>
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Volume (ml)</th>
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Viscosity</th>
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Consistency</th>
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Motility (%)</th>
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Morphology (%)</th>
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Total Sperm Count</th>
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Date</th>
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Input result</th>
        </tr>
      </thead>
      <tbody class="bg-white divide-y divide-cyan-200">
        {% for test_info in semen_analysis %}
        <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
          <td class="p-3 whitespace-nowrap">{{ forloop.counter }}</td>
          <td class="p-3 whitespace-nowrap">{{ test_info.code|default_if_none:'N/A' }}</td>
          <td class="p-3 whitespace-nowrap">{{ test_info.semen_analysis_test.time_produced|time:"H:i"|default_if_none:'N/A' }}</td>
          <td class="p-3 whitespace-nowrap">{{ test_info.semen_analysis_test.time_examined|time:"H:i"|default_if_none:'N/A' }}</td>
          <td class="p-3 whitespace-nowrap">{{ test_info.semen_analysis_test.color|default_if_none:'N/A' }}</td>
          <td class="p-3 whitespace-nowrap">{{ test_info.semen_analysis_test.volume|default_if_none:'N/A' }}</td>
          <td class="p-3 whitespace-nowrap">{{ test_info.semen_analysis_test.viscosity|default_if_none:'N/A' }}</td>
          <td class="p-3 whitespace-nowrap">{{ test_info.semen_analysis_test.consistency|default_if_none:'N/A' }}</td>
          <td class="p-3 whitespace-nowrap">
            Active: {{ test_info.semen_analysis_test.motility_active|default_if_none:'N/A' }}<br>
            Moderate: {{ test_info.semen_analysis_test.motility_moderate|default_if_none:'N/A' }}<br>
            Sluggish: {{ test_info.semen_analysis_test.motility_sluggish|default_if_none:'N/A' }}
          </td>
          <td class="p-3 whitespace-nowrap">
            Normal: {{ test_info.semen_analysis_test.morphology_normal|default_if_none:'N/A' }}<br>
            Abnormal: {{ test_info.semen_analysis_test.morphology_abnormal|default_if_none:'N/A' }}<br>
            Sluggish: {{ test_info.semen_analysis_test.morphology_sluggish|default_if_none:'N/A' }}
          </td>
          <td class="p-3 whitespace-nowrap">{{ test_info.semen_analysis_test.total_sperm_count|default_if_none:'N/A' }}</td>
          <td class="p-3 whitespace-nowrap">{{ test_info.updated|default_if_none:'N/A' }}</td>
          <td class="p-3 whitespace-nowrap">
            <a href="{% url 'update_semen_analysis' patient.file_no test_info.id %}" class="text-xs hover:text-green-700">
              <i class="fa-solid fa-edit fa-2xl"></i>
            </a>
          </td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="13" class="p-3 text-center">No Semen Analysis test yet.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>

<!-- Urinalysis Section -->
<div>
  <div>
    <a href="{% url 'create_urinalysis' patient.file_no %}" class="text-xs text-amber-600 hover:text-green-700">
      <i class="fa-solid fa-plus fa-2xl"></i> SEND REQUEST
    </a>
  </div>
  <div class="overflow-x-auto max-h-[50vh] p-2">
    <table class="min-w-full divide-y divide-cyan-200 mb-4">
      <thead class="bg-cyan-50">
        <tr class="text-xs">
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Code</th>
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Color</th>
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Appearance</th>
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Specific Gravity</th>
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">pH</th>
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Protein</th>
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Glucose</th>
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Ketones</th>
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Bilirubin</th>
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Urobilinogen</th>
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Nitrites</th>
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Leukocyte Esterase</th>
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Blood</th>
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Culture Yield</th>
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Antibiotic Sensitivity</th>
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Date</th>
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Input result</th>
        </tr>
      </thead>
      <tbody class="bg-white divide-y divide-cyan-200">
        {% for test_info in urinalysis %}
        <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
          <td class="p-3 whitespace-nowrap">{{ forloop.counter }}</td>
          <td class="p-3 whitespace-nowrap">{{ test_info.code|default_if_none:'N/A' }}</td>
          <td class="p-3 whitespace-nowrap">{{ test_info.urinalysis_test.color|default_if_none:'N/A' }}</td>
          <td class="p-3 whitespace-nowrap">{{ test_info.urinalysis_test.appearance|default_if_none:'N/A' }}</td>
          <td class="p-3 whitespace-nowrap">{{ test_info.urinalysis_test.specific_gravity|default_if_none:'N/A' }}</td>
          <td class="p-3 whitespace-nowrap">{{ test_info.urinalysis_test.ph|default_if_none:'N/A' }}</td>
          <td class="p-3 whitespace-nowrap">{{ test_info.urinalysis_test.protein|default_if_none:'N/A' }}</td>
          <td class="p-3 whitespace-nowrap">{{ test_info.urinalysis_test.glucose|default_if_none:'N/A' }}</td>
          <td class="p-3 whitespace-nowrap">{{ test_info.urinalysis_test.ketones|default_if_none:'N/A' }}</td>
          <td class="p-3 whitespace-nowrap">{{ test_info.urinalysis_test.bilirubin|default_if_none:'N/A' }}</td>
          <td class="p-3 whitespace-nowrap">{{ test_info.urinalysis_test.urobilinogen|default_if_none:'N/A' }}</td>
          <td class="p-3 whitespace-nowrap">{{ test_info.urinalysis_test.nitrites|default_if_none:'N/A' }}</td>
          <td class="p-3 whitespace-nowrap">{{ test_info.urinalysis_test.leukocyte_esterase|default_if_none:'N/A' }}</td>
          <td class="p-3 whitespace-nowrap">{{ test_info.urinalysis_test.blood|default_if_none:'N/A' }}</td>
          <td class="p-3 whitespace-nowrap">{{ test_info.urinalysis_test.culture_yield|default_if_none:'N/A' }}</td>
          <td class="p-3 whitespace-nowrap">{{ test_info.urinalysis_test.antibiotic_sensitivity|default_if_none:'N/A' }}</td>
          <td class="p-3 whitespace-nowrap">{{ test_info.updated|default_if_none:'N/A' }}</td>
          <td class="p-3 whitespace-nowrap">
            <a href="{% url 'update_urinalysis' patient.file_no test_info.id %}" class="text-xs hover:text-green-700">
              <i class="fa-solid fa-edit fa-2xl"></i>
            </a>
          </td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="18" class="p-3 text-center">No Urinalysis test yet.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>

<!-- Pregnancy Test Section -->
<div>
  <div>
    <a href="{% url 'create_pregnancy_test' patient.file_no %}" class="text-xs text-amber-600 hover:text-green-700">
      <i class="fa-solid fa-plus fa-2xl"></i> SEND REQUEST
    </a>
  </div>
  <div class="overflow-x-auto max-h-[50vh] p-2">
    <table class="min-w-full divide-y divide-cyan-200 mb-4">
      <thead class="bg-cyan-50">
        <tr class="text-xs">
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Code</th>
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Result</th>
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Method</th>
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Date</th>
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Input result</th>
        </tr>
      </thead>
      <tbody class="bg-white divide-y divide-cyan-200">
        {% for test_info in pregnancy %}
        <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
          <td class="p-3 whitespace-nowrap">{{ forloop.counter }}</td>
          <td class="p-3 whitespace-nowrap">{{ test_info.code|default_if_none:'N/A' }}</td>
          <td class="p-3 whitespace-nowrap">{{ test_info.pregnancy_test.result|default_if_none:'N/A' }}</td>
          <td class="p-3 whitespace-nowrap">{{ test_info.pregnancy_test.method|default_if_none:'N/A' }}</td>
          <td class="p-3 whitespace-nowrap">{{ test_info.updated|default_if_none:'N/A' }}</td>
          <td class="p-3 whitespace-nowrap">
            <a href="{% url 'update_pregnancy_test' patient.file_no test_info.id %}" class="text-xs hover:text-green-700">
              <i class="fa-solid fa-edit fa-2xl"></i>
            </a>
          </td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="6" class="p-3 text-center">No Pregnancy test yet.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
      </div>    
      </div>

       </div>

       <!-- new lab  -->      

       <!-- new lab -->
        <div> 
          <div class="text-center rounded-xl p-2 m-4  md:p-10 bg-gray-50">
            <ul class="uk-subnav uk-subnav-pill uppercase flex justify-center gap-2 " uk-switcher="animation: uk-animation-slide-left-medium, uk-animation-slide-right-medium">
              <li ><a href="#" class="rounded-lg ">Widal</a></li>
              <li><a href="#" class="rounded-lg ">Rheumatoid Factor</a></li>
              <li><a href="#" class="rounded-lg ">Hepatitis B</a></li>
              <li><a href="#" class="rounded-lg ">Hepatitis C</a></li>
              <li><a href="#" class="rounded-lg ">VDRL</a></li>
              <li><a href="#" class="rounded-lg ">Mantoux</a></li>
              <li><a href="#" class="rounded-lg ">Aso Titre</a></li>
              <li><a href="#" class="rounded-lg ">CRP</a></li>
              <li><a href="#" class="rounded-lg ">HIV SCREENING</a></li>
            </ul>
            
            <div class="uk-switcher uk-margin">
       
<!-- new test  -->
<!-- Widal Test Results -->
<div>
  <div>
    <a href="{% url 'create_widal' patient.file_no %}" class="text-xs text-amber-600 hover:text-green-700"><i class="fa-solid fa-plus fa-2xl"></i> SEND REQUEST</a>
  </div>
  <div class="overflow-x-auto max-h-[50vh] p-2">
    <table class="min-w-full divide-y divide-cyan-200 mb-4">
      <thead class="bg-cyan-50">
        <tr class="text-xs">
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Code</th>
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">O Antigen S. Typhi D</th>
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">O Antigen S. Paratyphi A</th>
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">O Antigen S. Paratyphi B</th>
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">O Antigen S. Paratyphi C</th>
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">H Antigen S. Typhi D</th>
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">H Antigen S. Paratyphi A</th>
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">H Antigen S. Paratyphi B</th>
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">H Antigen S. Paratyphi C</th>
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Diagnostic Titre</th>
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">Date</th>
          <th class="p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider"></th>
        </tr>
      </thead>
      <tbody class="bg-white divide-y divide-cyan-200">
        {% for test_info in widal %}
        <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
          <td class="p-3 whitespace-nowrap">{{ forloop.counter }}</td>
          <td class="p-3 whitespace-nowrap">{{ test_info.code }}</td>
          <td class="p-3 whitespace-nowrap">{{ test_info.widal_test.o_antigen_s_typhi_d|default_if_none:'N/A' }}</td>
          <td class="p-3 whitespace-nowrap">{{ test_info.widal_test.o_antigen_s_paratyphi_a|default_if_none:'N/A' }}</td>
          <td class="p-3 whitespace-nowrap">{{ test_info.widal_test.o_antigen_s_paratyphi_b|default_if_none:'N/A' }}</td>
          <td class="p-3 whitespace-nowrap">{{ test_info.widal_test.o_antigen_s_paratyphi_c|default_if_none:'N/A' }}</td>
          <td class="p-3 whitespace-nowrap">{{ test_info.widal_test.h_antigen_s_typhi_d|default_if_none:'N/A' }}</td>
          <td class="p-3 whitespace-nowrap">{{ test_info.widal_test.h_antigen_s_paratyphi_a|default_if_none:'N/A' }}</td>
          <td class="p-3 whitespace-nowrap">{{ test_info.widal_test.h_antigen_s_paratyphi_b|default_if_none:'N/A' }}</td>
          <td class="p-3 whitespace-nowrap">{{ test_info.widal_test.h_antigen_s_paratyphi_c|default_if_none:'N/A' }}</td>
          <td class="p-3 whitespace-nowrap">{{ test_info.widal_test.diagnostic_titre }}</td>
          <td class="p-3 whitespace-nowrap">{{ test_info.updated|default_if_none:'N/A' }}</td>
          <td class="p-3 whitespace-nowrap"><a href="{% url 'update_widal' patient.file_no test_info.id %}" class="text-green-600 hover:text-green-700"><i class="fa-solid fa-edit fa-2xl"></i></a></td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="13" class="p-3 text-center">No Widal test yet.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
<!-- new test  -->
            
            <!-- new test  -->
              <div>
                <div>
                  <a href="{%url 'create_rheumatoid_factor' patient.file_no %}" class="text-xs text-amber-600 hover:text-green-700"><i class="fa-solid fa-plus fa-2xl"></i> SEND REQUEST</a>
                </div>
                <div class="overflow-x-auto max-h-[50vh] p-2">
                  <table class="min-w-full divide-y divide-cyan-200 mb-4">
                    <thead class="bg-cyan-50">
                      <tr class="text-xs">
                        <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
                        <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">code</th>
                        <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">result</th>
                        <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">date</th>
                        <th class=" p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider"></th>
                      </tr>
    
                    </thead>
                    <tbody class="bg-white divide-y divide-cyan-200">
                      {%for test_info in rheumatoid_factor %}
                      <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
                        <td class=" p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                        <td class=" p-3 whitespace-nowrap">{{ test_info.code }}</td>
                        <td class=" p-3 whitespace-nowrap">{{ test_info.rheumatoid_factor_test.result|default_if_none:'N/A' }}</td>
                        <td class=" p-3 whitespace-nowrap">{{ test_info.updated|default_if_none:'N/A' }}</td>
                        <td class=" p-3 whitespace-nowrap">  <a href="{%url 'update_rheumatoid_factor' patient.file_no test_info.id %}" class="text-green-600 hover:text-green-700"><i class="fa-solid fa-edit fa-2xl"></i></a></td> 
                      </tr>
                      {%empty%}
                      <tr>
                        <td colspan="9" class="p-3 text-center">No rheumatoid factor test  yet.</td>
                    </tr>
                    {% endfor %}
                    </tbody>
                  </table>
                </div>
              </div>  
            
              <!-- new test  -->
            
<!-- new test  -->
<div>
  <div>
    <a href="{%url 'create_hpb' patient.file_no %}" class="text-xs text-amber-600 hover:text-green-700"><i class="fa-solid fa-plus fa-2xl"></i> SEND REQUEST</a>
  </div>
  <div class="overflow-x-auto max-h-[50vh] p-2">
    <table class="min-w-full divide-y divide-cyan-200 mb-4">
      <thead class="bg-cyan-50">
        <tr class="text-xs">
          <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
          <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">code</th>
          <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">result</th>
          <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">date</th>
          <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider"></th>
        </tr>
      </thead>
      <tbody class="bg-white divide-y divide-cyan-200">
        {% for test_info in hpb %}
        <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
          <td class="p-3 whitespace-nowrap">{{ forloop.counter }}</td>
          <td class="p-3 whitespace-nowrap">{{ test_info.code }}</td>
          <td class="p-3 whitespace-nowrap">{{ test_info.hpb_test.result|default_if_none:'N/A' }}</td>
          <td class="p-3 whitespace-nowrap">{{ test_info.updated|default_if_none:'N/A' }}</td>
          <td class="p-3 whitespace-nowrap"><a href="{%url 'update_hpb' patient.file_no test_info.id %}" class="text-green-600 hover:text-green-700"><i class="fa-solid fa-edit fa-2xl"></i></a></td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="9" class="p-3 text-center">No Hepatitis B test yet.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
<!-- new test  -->
<div>
  <div>
    <a href="{%url 'create_hcv' patient.file_no %}" class="text-xs text-amber-600 hover:text-green-700"><i class="fa-solid fa-plus fa-2xl"></i> SEND REQUEST</a>
  </div>
  <div class="overflow-x-auto max-h-[50vh] p-2">
    <table class="min-w-full divide-y divide-cyan-200 mb-4">
      <thead class="bg-cyan-50">
        <tr class="text-xs">
          <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
          <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">code</th>
          <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">result</th>
          <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">date</th>
          <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider"></th>
        </tr>
      </thead>
      <tbody class="bg-white divide-y divide-cyan-200">
        {% for test_info in hcv %}
        <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
          <td class="p-3 whitespace-nowrap">{{ forloop.counter }}</td>
          <td class="p-3 whitespace-nowrap">{{ test_info.code }}</td>
          <td class="p-3 whitespace-nowrap">{{ test_info.hcv_test.result|default_if_none:'N/A' }}</td>
          <td class="p-3 whitespace-nowrap">{{ test_info.updated|default_if_none:'N/A' }}</td>
          <td class="p-3 whitespace-nowrap"><a href="{%url 'update_hcv' patient.file_no test_info.id %}" class="text-green-600 hover:text-green-700"><i class="fa-solid fa-edit fa-2xl"></i></a></td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="9" class="p-3 text-center">No Hepatitis C test yet.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
<!-- new test  -->

            
            <!-- new test  -->
<!-- new test  -->
<div>
  <div>
    <a href="{% url 'create_vdrl' patient.file_no %}" class="text-xs text-amber-600 hover:text-green-700"><i class="fa-solid fa-plus fa-2xl"></i> SEND REQUEST</a>
  </div>
  <div class="overflow-x-auto max-h-[50vh] p-2">
    <table class="min-w-full divide-y divide-cyan-200 mb-4">
      <thead class="bg-cyan-50">
        <tr class="text-xs">
          <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
          <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">code</th>
          <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">result</th>
          <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">date</th>
          <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider"></th>
        </tr>
      </thead>
      <tbody class="bg-white divide-y divide-cyan-200">
        {% for test_info in vdrl %}
        <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
          <td class="p-3 whitespace-nowrap">{{ forloop.counter }}</td>
          <td class="p-3 whitespace-nowrap">{{ test_info.code }}</td>
          <td class="p-3 whitespace-nowrap">{{ test_info.vdrl_test.result|default_if_none:'N/A' }}</td>
          <td class="p-3 whitespace-nowrap">{{ test_info.updated|default_if_none:'N/A' }}</td>
          <td class="p-3 whitespace-nowrap"><a href="{%url 'update_vdrl' patient.file_no test_info.id %}" class="text-green-600 hover:text-green-700"><i class="fa-solid fa-edit fa-2xl"></i></a></td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="9" class="p-3 text-center">No VDRL test yet.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
<!-- new test  -->

            <!-- new test  -->


<!-- Mantoux Test Results -->
<div>
  <div>
    <a href="{% url 'create_mantoux' patient.file_no %}" class="text-xs text-amber-600 hover:text-green-700"><i class="fa-solid fa-plus fa-2xl"></i> SEND REQUEST</a>
  </div>
  <div class="overflow-x-auto max-h-[50vh] p-2">
    <table class="min-w-full divide-y divide-cyan-200 mb-4">
      <thead class="bg-cyan-50">
        <tr class="text-xs">
          <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
          <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">code</th>
          <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">result</th>
          <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">date</th>
          <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider"></th>
        </tr>
      </thead>
      <tbody class="bg-white divide-y divide-cyan-200">
        {% for test_info in mantoux %}
        <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
          <td class="p-3 whitespace-nowrap">{{ forloop.counter }}</td>
          <td class="p-3 whitespace-nowrap">{{ test_info.code }}</td>
          <td class="p-3 whitespace-nowrap">{{ test_info.mantoux_test.result }}</td>
          <td class="p-3 whitespace-nowrap">{{ test_info.updated|default_if_none:'N/A' }}</td>
          <td class="p-3 whitespace-nowrap"><a href="{% url 'update_mantoux' patient.file_no test_info.id %}" class="text-green-600 hover:text-green-700"><i class="fa-solid fa-edit fa-2xl"></i></a></td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="5" class="p-3 text-center">No mantoux test yet.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>

<!-- ASO Titre Test Results -->
<div>
  <div>
    <a href="{% url 'create_aso_titre' patient.file_no %}" class="text-xs text-amber-600 hover:text-green-700"><i class="fa-solid fa-plus fa-2xl"></i> SEND REQUEST</a>
  </div>
  <div class="overflow-x-auto max-h-[50vh] p-2">
    <table class="min-w-full divide-y divide-cyan-200 mb-4">
      <thead class="bg-cyan-50">
        <tr class="text-xs">
          <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
          <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">code</th>
          <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">result</th>
          <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">date</th>
          <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider"></th>
        </tr>
      </thead>
      <tbody class="bg-white divide-y divide-cyan-200">
        {% for test_info in aso_titre %}
        <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
          <td class="p-3 whitespace-nowrap">{{ forloop.counter }}</td>
          <td class="p-3 whitespace-nowrap">{{ test_info.code }}</td>
          <td class="p-3 whitespace-nowrap">{{ test_info.aso_titre_test.result }}</td>
          <td class="p-3 whitespace-nowrap">{{ test_info.updated|default_if_none:'N/A' }}</td>
          <td class="p-3 whitespace-nowrap"><a href="{% url 'update_aso_titre' patient.file_no test_info.id %}" class="text-green-600 hover:text-green-700"><i class="fa-solid fa-edit fa-2xl"></i></a></td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="5" class="p-3 text-center">No ASO Titre test yet.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>

<!-- CRP Test Results -->
<div>
  <div>
    <a href="{% url 'create_crp' patient.file_no %}" class="text-xs text-amber-600 hover:text-green-700"><i class="fa-solid fa-plus fa-2xl"></i> SEND REQUEST</a>
  </div>
  <div class="overflow-x-auto max-h-[50vh] p-2">
    <table class="min-w-full divide-y divide-cyan-200 mb-4">
      <thead class="bg-cyan-50">
        <tr class="text-xs">
          <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
          <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">code</th>
          <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">result</th>
          <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">date</th>
          <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider"></th>
        </tr>
      </thead>
      <tbody class="bg-white divide-y divide-cyan-200">
        {% for test_info in crp %}
        <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
          <td class="p-3 whitespace-nowrap">{{ forloop.counter }}</td>
          <td class="p-3 whitespace-nowrap">{{ test_info.code }}</td>
          <td class="p-3 whitespace-nowrap">{{ test_info.crp_test.result }}</td>
          <td class="p-3 whitespace-nowrap">{{ test_info.updated|default_if_none:'N/A' }}</td>
          <td class="p-3 whitespace-nowrap"><a href="{% url 'update_crp' patient.file_no test_info.id %}" class="text-green-600 hover:text-green-700"><i class="fa-solid fa-edit fa-2xl"></i></a></td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="5" class="p-3 text-center">No CRP test yet.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>

<!-- HIV Screening Test Results -->
<div>
  <div>
    <a href="{% url 'create_hiv_screening' patient.file_no %}" class="text-xs text-amber-600 hover:text-green-700"><i class="fa-solid fa-plus fa-2xl"></i> SEND REQUEST</a>
  </div>
  <div class="overflow-x-auto max-h-[50vh] p-2">
    <table class="min-w-full divide-y divide-cyan-200 mb-4">
      <thead class="bg-cyan-50">
        <tr class="text-xs">
          <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">#</th>
          <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">code</th>
          <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">result</th>
          <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider">date</th>
          <th class=" p-3 text-xs font-medium text-cyan-500 uppercase tracking-wider"></th>
        </tr>
      </thead>
      <tbody class="bg-white divide-y divide-cyan-200">
        {% for test_info in hiv_screening %}
        <tr class="text-xs bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300">
          <td class="p-3 whitespace-nowrap">{{ forloop.counter }}</td>
          <td class="p-3 whitespace-nowrap">{{ test_info.code }}</td>
          <td class="p-3 whitespace-nowrap">{{ test_info.hiv_test.result }}</td>
          <td class="p-3 whitespace-nowrap">{{ test_info.updated|default_if_none:'N/A' }}</td>
          <td class="p-3 whitespace-nowrap"><a href="{% url 'update_hiv_screening' patient.file_no test_info.id %}" class="text-green-600 hover:text-green-700"><i class="fa-solid fa-edit fa-2xl"></i></a></td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="5" class="p-3 text-center">No HIV Screening test yet.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
            
            <!-- new test  -->
            
      </div>    
      </div>

       </div>

       <!-- new lab  -->      
      
        <div>
          <div>
            <a href="{% url 'general_test' patient.file_no %}" class="text-xs text-rose-600 hover:text-green-700"><i class="fa-solid fa-edit fa-2xl"></i></a>
            </div>
            <div class="overflow-x-auto px-4 md:px-10 m-4">
              <table class="min-w-full divide-y divide-cyan-200 mb-4">
                <thead class="bg-cyan-50">
      
                  <tr class="text-center">
                    <th class="p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">S/N</th>
                    <th class="p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Test</th>
                    <th class="p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Date Collected</th>
                    <th class="p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Result</th>
                    <th class="p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Nature of Specimen</th>
                    <th class="p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Date Reported</th>
                    <th class="p-3  text-xs font-medium text-cyan-500 uppercase tracking-wider">Edit</th>
                  </tr>
        
                </thead>
                <tbody class="bg-white divide-y divide-cyan-200">
                  {% for g in general_results %}
                  <tr class="bg-cyan-100 hover:bg-cyan-200 transition-colors duration-300 text-xs">
                    <td class="p-3 whitespace-nowrap">{{ forloop.counter }}</td>
                    <td class="p-3 whitespace-nowrap">{{ g.name|default_if_none:'N/A'}}</td>
                    <td class="p-3 whitespace-nowrap">{{ g.collected|default_if_none:'N/A' }}</td>
                    <td class="p-3 whitespace-nowrap">{{ g.result.html|safe }}</td>
                    <td class="p-3 whitespace-nowrap">{{ g.nature_of_specimen|default_if_none:'N/A' }}</td>
                    {%if g.cleared %}
                    <td class=" p-3 whitespace-nowrap">{{ g.updated|default_if_none:'N/A' }}</td>
                    {%else%}
                    <td class=" p-3 whitespace-nowrap"></td>
                    {%endif%}      
                <td class="p-3 whitespace-nowrap">
                      <a href="{% url 'general_result' g.patient.file_no g.id %}" class="text-green-600 hover:text-green-700"><i class="fa-solid fa-edit fa-2xl"></i></a>
                    </td>
                  </tr>
                  {% endfor %}
                </tbody>
              </table>
            </div>
        </div>
        


      </div>

  </div>
</div>
{% endblock %}